{% extends "pyggi/base.xhtml" %}

{% block content %}

{% include "pyggi/repo.xhtml" %}
{% include "pyggi/commit.xhtml" %}
{% include "pyggi/breadcrumbs.xhtml" %}

{% set repo = repository.name %}
{% set path = '/'.join(breadcrumbs) %}
{% set blob = repository.blob('/'.join([treeid]+breadcrumbs)) %}

<style type="text/css" media="screen">
	#file .meta {
		background: #EEE url("{{ url_for('static', filename='images/bg_file.gif') }}") repeat-x 0px 0px;
	}
</style>

<div id="file">
	<div class="meta">
		<div class="info">
			<span class="icon"><img alt="file" src="{{ url_for('static', filename='images/txt.png') }}" width="16" height="16" /></span>
			<span class="mode">{{ blob.mode }} |</span>
			<span>{{ blob.mime_type }} |</span>
			<span>{{ blob.size|sizeformat }}</span>
		</div>
		<ul class="actions">
			<li><a href="{{ url_for('raw', repository=repo, tree=treeid, path=path) }}">raw</a>&nbsp;&nbsp;| </li>
			<li><a href="{{ url_for('blame', repository=repo, tree=treeid, path=path) }}">blame</a>&nbsp;&nbsp;| </li>
			<li><a href="{{ url_for('history', repository=repo, tree=treeid, path=path) }}">history</a></li>
		</ul>
	</div>

	<div class="data">
		{% if blob.mime_type.startswith("text/") %}
		<table cellpadding="0" cellspacing="0">
			{% for line in blob.data.split("\n") %}
			<tr>
				<td class="linenumber">{{ loop.index }}</td>
				<td class="code">{{ line }}</td>
			</tr>
			{% endfor %}
		</table>
		{% else %}
		<div class="note">binary data</div>
		{% endif %}
	</div>

</div>
{% endblock %}
